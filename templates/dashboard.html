{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<h1>Bem-vindo ao Atestto, {{ current_user.nome or current_user.email }}!</h1>

<section class="upload-card">
  <h2>Enviar documento</h2>
  <form action="{{ url_for('dashboard.documentos_enviados') }}" method="post" enctype="multipart/form-data">
    <input type="text" name="titulo" placeholder="Título do documento" required>
    <input type="text" name="nome_documento" placeholder="Nome do documento (opcional)">
    <input type="email" name="destinatario_email" placeholder="E-mail do destinatário (opcional)">
    <div class="drop-area">
      <input type="file" name="file" required>
    </div>
    <button type="submit" class="btn">Enviar</button>
  </form>
</section>

<hr>

<section>
  <h2>Documentos recebidos (não visualizados)</h2>
  <div class="document-list">
    {% if documentos_recebidos %}
      {% for doc in documentos_recebidos %}
        <div class="document-card">
          <p><strong>{{ doc.titulo or doc.nome }}</strong></p>
          <p>Data: {{ doc.data_upload }}</p>
          <a class="btn" href="{{ url_for('dashboard.visualizar_documento', doc_id=doc.id) }}">Visualizar</a>
        </div>
      {% endfor %}
    {% else %}
      <p>Você não tem documentos novos.</p>
    {% endif %}
  </div>
</section>
{% endblock %}
